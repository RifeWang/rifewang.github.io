<!doctype html><html lang=en><head><title>XSS vs CSRF · 凌虚 Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="凌虚"><meta name=description content="XSS vs CSRF"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="XSS vs CSRF"><meta name=twitter:description content="XSS vs CSRF"><meta property="og:title" content="XSS vs CSRF"><meta property="og:description" content="XSS vs CSRF"><meta property="og:type" content="article"><meta property="og:url" content="https://rifewang.github.io/translation/web-security/csrf/xss-vs-csrf/"><meta property="article:section" content="translation"><meta property="article:published_time" content="2021-03-09T00:00:00+08:00"><meta property="article:modified_time" content="2021-03-09T00:00:00+08:00"><link rel=canonical href=https://rifewang.github.io/translation/web-security/csrf/xss-vs-csrf/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.0fa2dc75ed1b76894ac0e062b10a6c4730daa745096fa120114b290ed8a48788.css integrity="sha256-D6Lcde0bdolKwOBisQpsRzDap0UJb6EgEUspDtikh4g=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.593028e7f7ac55c003b79c230d1cd411bb4ca53b31556c3abb7f027170e646e9.css integrity="sha256-WTAo5/esVcADt5wjDRzUEbtMpTsxVWw6u38CcXDmRuk=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/images/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.110.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>凌虚 Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>博客</a></li><li class=navigation-item><a class=navigation-link href=/translation/>译文</a></li><li class=navigation-item><a class=navigation-link href=/about/>关于</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://rifewang.github.io/translation/web-security/csrf/xss-vs-csrf/>XSS vs CSRF</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2021-03-09T00:00:00+08:00>March 9, 2021</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
One-minute read</span></div><div class=categories><i class="fa fa-folder" aria-hidden=true></i>
<a href=/categories/web-security/>web security</a></div></div></header><div class=post-content><h1 id=xss-vs-csrf>XSS vs CSRF
<a class=heading-link href=#xss-vs-csrf><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h1><p>在本节中，我们将解释 <code>XSS</code> 和 <code>CSRF</code> 之间的区别，并讨论 <code>CSRF token</code> 是否有助于防御 <code>XSS</code> 攻击。</p><h2 id=xss-和-csrf-之间有啥区别>XSS 和 CSRF 之间有啥区别
<a class=heading-link href=#xss-%e5%92%8c-csrf-%e4%b9%8b%e9%97%b4%e6%9c%89%e5%95%a5%e5%8c%ba%e5%88%ab><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>跨站脚本攻击 <code>XSS</code> 允许攻击者在受害者用户的浏览器中执行任意 JavaScript 。</p><p>跨站请求伪造 <code>CSRF</code> 允许攻击者伪造受害用户执行他们不打算执行的操作。</p><p><code>XSS</code> 漏洞的后果通常比 <code>CSRF</code> 漏洞更严重：</p><ul><li><code>CSRF</code> 通常只适用于用户能够执行的操作的子集。通常，许多应用程序都实现 <code>CSRF</code> 防御，但是忽略了暴露的一两个操作。相反，成功的 <code>XSS</code> 攻击通常可以执行用户能够执行的任何操作，而不管该漏洞是在什么功能中产生的。</li><li><code>CSRF</code> 可以被描述为一个“单向”漏洞，因为尽管攻击者可以诱导受害者发出 HTTP 请求，但他们无法从该请求中检索响应。相反，<code>XSS</code> 是“双向”的，因为攻击者注入的脚本可以发出任意请求、读取响应并将数据传输到攻击者选择的外部域。</li></ul><h2 id=csrf-token-能否防御-xss-攻击>CSRF token 能否防御 XSS 攻击
<a class=heading-link href=#csrf-token-%e8%83%bd%e5%90%a6%e9%98%b2%e5%be%a1-xss-%e6%94%bb%e5%87%bb><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h2><p>一些 <code>XSS</code> 攻击确实可以通过有效使用 <code>CSRF token</code> 来进行防御。假设有一个简单的反射型 <code>XSS</code> 漏洞，其可以被利用如下：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>https://insecure-website.com/status?message=&lt;script&gt;/*+Bad+stuff+here...+*/&lt;/script&gt;
</span></span></code></pre></div><p>现在，假设漏洞函数包含一个 <code>CSRF token</code> :</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>https://insecure-website.com/status?csrf-token=CIwNZNlR4XbisJF39I8yWnWX9wX4WFoz&amp;message=&lt;script&gt;/*+Bad+stuff+here...+*/&lt;/script&gt;
</span></span></code></pre></div><p>如果服务器正确地验证了 <code>CSRF token</code> ，并拒绝了没有有效令牌的请求，那么该令牌确实可以防止此 XSS 漏洞的利用。这里的关键点是“跨站脚本”的攻击中涉及到了跨站请求，因此通过防止攻击者伪造跨站请求，该应用程序可防止对 <code>XSS</code> 漏洞的轻度攻击。</p><p>这里有一些重要的注意事项：</p><ul><li>如果反射型 <code>XSS</code> 漏洞存在于站点上任何其他不受 <code>CSRF token</code> 保护的函数内，则可以以常规方式利用该 <code>XSS</code> 漏洞。</li><li>如果站点上的任何地方都存在可利用的 <code>XSS</code> 漏洞，则可以利用该漏洞使受害用户执行操作，即使这些操作本身受到 <code>CSRF token</code> 的保护。在这种情况下，攻击者的脚本可以请求相关页面获取有效的 <code>CSRF token</code>，然后使用该令牌执行受保护的操作。</li><li><code>CSRF token</code> 不保护存储型 <code>XSS</code> 漏洞。如果受 <code>CSRF token</code> 保护的页面也是存储型 <code>XSS</code> 漏洞的输出点，则可以以通常的方式利用该 <code>XSS</code> 漏洞，并且当用户访问该页面时，将执行 <code>XSS</code> 有效负载。</li></ul></div><footer></footer></article></section></div><footer class=footer><section class=container>©
2019 -
2023
凌虚
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>